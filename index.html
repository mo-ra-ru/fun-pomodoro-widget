<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: #2D9B9B;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            background: #FFD93D;
            border: 4px solid #1A1A1A;
            border-radius: 20px;
            padding: 40px;
            max-width: 400px;
            width: 100%;
            box-shadow: 8px 8px 0 #1a1a1a;
        }
        
        .character {
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
            position: relative;
            border-radius: 50%;
            overflow: hidden;
            border: 4px solid #1A1A1A;
            background: #2D9B9B;
        }
        
        .character img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .timer-display {
            background: #FF6BCB;
            border: 3px solid #1A1A1A;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .time {
            font-size: 64px;
            font-weight: bold;
            color: #1A1A1A;
            letter-spacing: 2px;
        }
        
        .status {
            font-size: 18px;
            color: #1A1A1A;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        button {
            flex: 1;
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
            border: 3px solid #1A1A1A;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
            box-shadow: 4px 4px 0 #1a1a1a;
        }
        
        button:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 #1a1a1a;
        }
        
        .start-btn {
            background: #6BCB77;
            color: #1A1A1A;
        }
        
        .pause-btn {
            background: #FF6B9D;
            color: #1A1A1A;
        }
        
        .reset-btn {
            background: #C44569;
            color: white;
        }
        
        .mode-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mode-btn {
            flex: 1;
            padding: 12px;
            font-size: 14px;
            background: white;
            color: #1A1A1A;
        }
        
        .mode-btn.active {
            background: #2D9B9B;
            color: white;
        }
        
        .session-counter {
            text-align: center;
            font-size: 16px;
            color: #1A1A1A;
            font-weight: bold;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .character.working {
            animation: bounce 2s ease-in-out infinite;
        }
        .bmc-wrapper {
          position: fixed;
          bottom: 24px;
          right: 24px;
          z-index: 999;
        }
        
        .bmc-btn {
          display: flex;
          align-items: center;
          gap: 10px;
          background: #FF6EC7; /* magenta-pink to match your app */
          color: #1a1a1a;
          font-family: inherit;
          font-weight: 700;
          font-size: 15px;
          text-decoration: none;
          padding: 12px 22px 12px 16px;
          border-radius: 50px;
          border: 2.5px solid #1a1a1a;
          box-shadow: 4px 4px 0px #1a1a1a;
          transition: transform 0.1s ease, box-shadow 0.1s ease;
          white-space: nowrap;
        }
        
        .bmc-btn:hover {
          transform: translate(-2px, -2px);
          box-shadow: 6px 6px 0px #1a1a1a;
        }
        
        .bmc-btn:active {
          transform: translate(2px, 2px);
          box-shadow: 2px 2px 0px #1a1a1a;
        }
        
        .bmc-emoji {
          font-size: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="character" id="character">
            <img id="characterImg" src = "idle.png" alt="Character">
        </div>
        
        <div class="mode-buttons">
            <button class="mode-btn active" onclick="setMode('pomodoro')">Work</button>
            <button class="mode-btn" onclick="setMode('short')">Short Break</button>
            <button class="mode-btn" onclick="setMode('long')">Long Break</button>
        </div>
        
        <div class="timer-display">
            <div class="time" id="time">25:00</div>
            <div class="status" id="status">Ready to focus!</div>
        </div>
        
        <div class="controls">
            <button class="start-btn" id="startBtn" onclick="toggleTimer()">Start</button>
            <button class="reset-btn" onclick="resetTimer()">Reset</button>
        </div>
        
        <div class="session-counter" id="sessions">Sessions completed: 0</div>
        <!-- ☕ Buy Me a Coffee Button -->
        <div class="bmc-wrapper">
          <a href="https://buy.stripe.com/aFa3cu9261M1fXp3sZfEk00" target="_blank" class="bmc-btn">
            <span class="bmc-emoji">☕</span>
            <span class="bmc-text">Buy me a coffee</span>
          </a>
        </div>
    </div>

    <script>
        let timer;
        let isRunning = false;
        let timeLeft = 25 * 60;
        let currentMode = 'pomodoro';
        let sessionsCompleted = 0;
        
        const modes = {
            pomodoro: { duration: 25 * 60, label: 'Time to work!' },
            short: { duration: 5 * 60, label: 'Short break!' },
            long: { duration: 15 * 60, label: 'Long break!' }
        };
        
        // Image URLs for each state
        // Replace these URLs with your actual hosted image URLs
        // Recommended image size: 400x400px or 500x500px (square)
        // Images will be cropped to circular frame
        const characterImages = {
            idle: 'idle.png',
            working: 'working.png',
            shortBreak: 'short-break.png',
            longBreak: 'long-break.png'
        };
        
        function updateDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('time').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }
        
        
        function updateCharacterState() {
            const img = document.getElementById('characterImg');

            // When paused: reflect the selected mode (not always idle)
            if (!isRunning) {
              if (currentMode === 'short') img.src = characterImages.shortBreak;
              else if (currentMode === 'long') img.src = characterImages.longBreak;
              else if (currentMode === 'pomodoro') img.src = characterImages.working;
              else img.src = characterImages.idle; 
              return;
            }
        
            // When running: reflect the active mode
            if (currentMode === 'pomodoro') img.src = characterImages.working;
            else if (currentMode === 'short') img.src = characterImages.shortBreak;
            else img.src = characterImages.longBreak;
        }           

        
        function toggleTimer() {
            isRunning = !isRunning;
            const btn = document.getElementById('startBtn');
            const character = document.getElementById('character');
            
            if (isRunning) {
                btn.textContent = 'Pause';
                btn.className = 'pause-btn';
                character.classList.add('working');
                document.getElementById('status').textContent = 
                    currentMode === 'pomodoro' ? 'Working hard!' : 'Taking a break!';
                
                updateCharacterState();
                
                timer = setInterval(() => {
                    timeLeft--;
                    updateDisplay();
                    
                    if (timeLeft === 0) {
                        completeSession();
                    }
                }, 1000);
            } else {
                btn.textContent = 'Start';
                btn.className = 'start-btn';
                character.classList.remove('working');
                document.getElementById('status').textContent = 'Paused';
                clearInterval(timer);
                updateCharacterState();
            }
        }
        
        function resetTimer() {
            clearInterval(timer);
            isRunning = false;
            timeLeft = modes[currentMode].duration;
            document.getElementById('startBtn').textContent = 'Start';
            document.getElementById('startBtn').className = 'start-btn';
            document.getElementById('character').classList.remove('working');
            document.getElementById('status').textContent = 'Ready to focus!';
            updateDisplay();
            updateCharacterState();
        }
        
        function setMode(mode) {
            if (isRunning) {
                toggleTimer();
            }
            
            currentMode = mode;
            timeLeft = modes[mode].duration;
            
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.getElementById('status').textContent = modes[mode].label;
            updateDisplay();
            updateCharacterState();
        }
        
        function completeSession() {
            clearInterval(timer);
            isRunning = false;
            
            if (currentMode === 'pomodoro') {
                sessionsCompleted++;
                document.getElementById('sessions').textContent = 
                    `Sessions completed: ${sessionsCompleted}`;
            }
            
            document.getElementById('startBtn').textContent = 'Start';
            document.getElementById('startBtn').className = 'start-btn';
            document.getElementById('character').classList.remove('working');
            document.getElementById('status').textContent = '✨ Session complete!';
            
            updateCharacterState();
            
            // Play a subtle notification (browsers may require user interaction)
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('Pomodoro Timer', {
                    body: 'Session complete! Time for a break.'
                });
            }
            

            
            timeLeft = modes[currentMode].duration;
            updateDisplay();
        }
        
        // Request notification permission
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }
        
        updateDisplay();
    </script>
</body>
</html>
